<app-page-header *ngIf="client.name" [breadcrumb]="'/Home/Clients/' + client.name" btn1Label="Save Changes" (btn1Click)="saveChanges()"></app-page-header>

<div class="page-body">

  <h2>{{client?.name}}</h2>
  <br>
  <form *ngIf="client">

    <div class="row">
      <div class="col-md-6">

        <div class="form-group">
          <label for="name">Business Name</label>
          <input type="text" class="form-control" id="name" placeholder="Business Name" name="name" [(ngModel)]="client.name">
        </div>

        <div class="form-group">
          <label for="siteUrl">Site Url</label>
          <input type="text" class="form-control" id="siteUrl" placeholder="Site Url" name="siteUrl" [(ngModel)]="client.siteUrl">
        </div>

      </div>
      <div class="col-md-6">

        <div class="form-group">
          <label for="name">Client Id</label>
          <input type="text" class="form-control" readonly id="id" placeholder="ClientId" name="id" [(ngModel)]="client.id">
        </div>

        <div class="form-group">
          <label for="siteUrl">Client API Key</label>
          <input type="text" class="form-control" readonly id="apiKey" placeholder="Client API Key" name="apiKey" [(ngModel)]="client.clientApiKey">
        </div>

      </div>
    </div>

  </form>

</div>

<ngb-tabset *ngIf="client">

  <ngb-tab [title]="'Employees (' + client.employees?.length + ')'">
    <ng-template ngbTabContent>

      <div class="table-toolbar">
        <div class="table-spacer"></div>
        <div class="table-button">
          <i class="fas fa-user-plus"></i>&nbsp; Add</div>
        <div class="table-button" [routerLink]="['/clients',client.id, 'employees', 'invite']">
          <i class="fas fa-user-plus"></i>&nbsp; Invite</div>
        <div class="table-button" *ngIf="employee?.status == 'Invited - Pending'" (click)="resendInvite(employee)">
          <i class="fas fa-user-plus"></i>&nbsp; Re-Send Invite</div>
        <div class="table-button">
          <i class="fas fa-user-cog"></i>&nbsp; Edit</div>
        <div class="table-button disabled">
          <i class="fas fa-user-slash"></i>&nbsp; Disable</div>
        <div class="table-button disabled">
          <i class="fas fa-user-times"></i>&nbsp; Delete </div>
      </div>
      <table class="table table-hover">
        <thead>
          <tr>
            <th></th>
            <th>Name</th>
            <th>Username</th>
            <th>Status</th>
            <th>Auth Provider</th>
            <th>Validated Email</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let e of client.employees" (click)="employee = e">
            <td>
              <i class="fas fa-user-tie table-icon"></i>
            </td>
            <td>{{e.firstName}} {{e.lastName}}</td>
            <td>{{e.username}}</td>
            <td>{{e.status}}</td>
            <td>{{e.providerName}}</td>
            <td>{{e.validatedEmail}}</td>
          </tr>
        </tbody>
      </table>

    </ng-template>
  </ngb-tab>

  <ngb-tab [title]="'Customers (' + client.customers?.length + ')'">
    <ng-template ngbTabContent>
      <div class="table-toolbar">
        <div class="table-spacer"></div>
        <div class="table-button">
          <i class="fas fa-user-plus"></i>&nbsp; Add</div>
        <div class="table-button">
          <i class="fas fa-user-plus"></i>&nbsp; Invite</div>
        <div class="table-button">
          <i class="fas fa-user-cog"></i>&nbsp; Edit</div>
        <div class="table-button disabled">
          <i class="fas fa-user-slash"></i>&nbsp; Disable</div>
        <div class="table-button disabled">
          <i class="fas fa-user-times"></i>&nbsp; Delete </div>
      </div>

      <table class="table table-hover">
        <thead>
          <tr>
            <th>Name</th>
            <th>Username</th>
            <th>Auth Provider</th>
            <th>Validated Email</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let c of client.customers">
            <td>
              <i class="fas fa-user table-icon"></i>
            </td>
            <td>{{c.firstName}} {{c.lastName}}</td>
            <td>{{c.username}}</td>
            <td>{{c.providerName}}</td>
            <td>{{c.validatedEmail}}</td>
          </tr>
        </tbody>
      </table>

    </ng-template>
  </ngb-tab>

  <ngb-tab title="Billing">
    <ng-template ngbTabContent>
      <div class="content">
        <h3>Billing Configuration</h3>
      </div>
    </ng-template>
  </ngb-tab>
  <ngb-tab title="Theme">
    <ng-template ngbTabContent>
      <div class="content">
        <h3>Default Client Theme</h3>
      </div>
    </ng-template>
  </ngb-tab>
  <ngb-tab title="Preferences">
    <ng-template ngbTabContent>
      <div class="content">
        <h3>Preferences</h3>
      </div>
    </ng-template>
  </ngb-tab>

</ngb-tabset>
